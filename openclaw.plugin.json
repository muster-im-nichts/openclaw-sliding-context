{
  "id": "sliding-context",
  "name": "Sliding Context",
  "description": "Cross-session working memory with sliding context window. Automatically captures turn summaries and injects relevant recent context into every agent turn.",
  "version": "0.1.0",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "embedding": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "apiKey": { "type": "string" },
          "model": {
            "type": "string",
            "enum": ["text-embedding-3-small", "text-embedding-3-large"],
            "default": "text-embedding-3-small"
          }
        },
        "required": ["apiKey"]
      },
      "summarization": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "mode": {
            "type": "string",
            "enum": ["llm", "rule-based"],
            "default": "llm"
          },
          "apiKey": { "type": "string" },
          "model": {
            "type": "string",
            "default": "claude-sonnet-4-20250514"
          }
        }
      },
      "dbPath": { "type": "string" },
      "decayHalfLifeHours": {
        "type": "number",
        "minimum": 1,
        "maximum": 72,
        "default": 18
      },
      "locale": {
        "type": "string",
        "enum": ["de", "en"],
        "default": "de"
      },
      "windowHours": {
        "type": "number",
        "minimum": 1,
        "maximum": 720,
        "default": 168
      },
      "recentWindowHours": {
        "type": "number",
        "minimum": 1,
        "maximum": 48,
        "default": 12
      },
      "recentCount": {
        "type": "number",
        "minimum": 0,
        "maximum": 20,
        "default": 5
      },
      "relevantCount": {
        "type": "number",
        "minimum": 0,
        "maximum": 10,
        "default": 3
      },
      "maxInjectEntries": {
        "type": "number",
        "minimum": 1,
        "maximum": 20,
        "default": 8
      },
      "maxInjectTokens": {
        "type": "number",
        "minimum": 200,
        "maximum": 5000,
        "default": 1500
      },
      "summaryMaxChars": {
        "type": "number",
        "minimum": 50,
        "maximum": 5000,
        "default": 500
      },
      "skipTrivial": {
        "type": "boolean",
        "default": true
      },
      "skipSessions": {
        "type": "array",
        "items": { "type": "string" },
        "default": []
      },
      "timeline": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "enabled": { "type": "boolean", "default": true },
          "workspacePath": { "type": "string", "default": "/root/.openclaw/workspace" }
        }
      }
    },
    "required": ["embedding"]
  },
  "uiHints": {
    "embedding.apiKey": {
      "label": "OpenAI API Key",
      "sensitive": true,
      "placeholder": "sk-proj-...",
      "help": "API key for OpenAI embeddings (or use ${OPENAI_API_KEY})"
    },
    "summarization.mode": {
      "label": "Summarization Mode",
      "help": "llm (Claude Sonnet, more accurate) or rule-based (free, faster)"
    },
    "summarization.apiKey": {
      "label": "Anthropic API Key (for LLM summaries)",
      "sensitive": true,
      "placeholder": "sk-ant-...",
      "help": "Falls back to embedding API key if not set"
    },
    "windowHours": {
      "label": "Context Window (hours)",
      "help": "How far back to look for context (default: 48h)"
    },
    "decayHalfLifeHours": {
      "label": "Decay Half-Life (hours)",
      "help": "After this many hours, recency weight drops to 50% (default: 18h)"
    },
    "maxInjectTokens": {
      "label": "Max Inject Tokens",
      "help": "Hard limit on injected context size per turn",
      "advanced": true
    },
    "skipSessions": {
      "label": "Skip Sessions",
      "help": "Session keys to never capture (e.g. group chats with strangers)",
      "advanced": true
    }
  }
}
